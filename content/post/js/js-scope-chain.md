# 作用域链

整理一下作用域相关知识

## 作用域

变量作用域

> 程序中定义这个变量的区域，有全区变量和局部变量

函数作用域

> js中没有块级作用域，只有函数作用域
>
> 函数内声明的所有变量在函数体内始终可见

## 作用域链

每段js代码(全局代码)都有一个与之关联的作用域链，是一个列表或链表，包含了这个函数所有的可访问的变量。当js需要查找变量时，会从第一个对象开始找相同名字，找不到就去下一个找，知道最后抛出ReferenceError。

当定义一个函数时，因为函数也是对象，它会保存一个作用域链。从函数内部向外遍历，每当碰到一个function时，就将其对应的变量对象添加至作用域链中去，如此下去，直到global对象，然后将作用域链的引用赋给`[[Scope]]`属性

当调用这个函数时，会创建一个新的对象存储它的局部变量，并将这个对象放在作用域链的前端。



### 其他

全局变量存在于运行期上下文作用域链的最末端，查找最慢，所以我们应该尽可能少使用全局变量，如果使用，就先用局部变量缓存下来；

`with`会在作用域链前端添加一个对象。